{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"results\"\n};\nconst _hoisted_2 = {\n  class: \"results__body\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"results__header header\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", null, \"Результаты\")], -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"results__content content\"\n};\nconst _hoisted_5 = {\n  class: \"results__footer footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_btn_toggle = _resolveComponent(\"v-btn-toggle\");\n  const _component_WhoWhomList = _resolveComponent(\"WhoWhomList\");\n  const _component_WhomWhoList = _resolveComponent(\"WhomWhoList\");\n  const _component_app_button = _resolveComponent(\"app-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\"<div class=\\\"results__btns\\\">\"), _createCommentVNode(\"<app-button\\n\\t\\t\\t\\t\\t\\tclass=\\\"results_select-btn select-btn\\\"\\n\\t\\t\\t\\t\\t\\t@click=\\\"whoWhomlist = true\\\"\\n\\t\\t\\t\\t\\t\\t:class=\\\"{ selected: whoWhomlist }\\\"\\n\\t\\t\\t\\t\\t\\t>Кто-кому</app-button\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<app-button\\n\\t\\t\\t\\t\\t\\tclass=\\\"results_select-btn select-btn\\\"\\n\\t\\t\\t\\t\\t\\t@click=\\\"whoWhomlist = false\\\"\\n\\t\\t\\t\\t\\t\\t:class=\\\"{ selected: !whoWhomlist }\\\"\\n\\t\\t\\t\\t\\t\\t>Кому-кто</app-button\\n\\t\\t\\t\\t\\t>\"), _createVNode(_component_v_btn_toggle, {\n    modelValue: _ctx.text,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.text = $event),\n    rounded: \"1.5\",\n    color: \"deep-purple-accent-3\",\n    size: \"\",\n    group: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_btn, {\n      value: \"who-whom\",\n      onClick: _cache[0] || (_cache[0] = $event => _ctx.whoWhomlist = true),\n      class: _normalizeClass({\n        selected: _ctx.whoWhomlist\n      })\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" Кто-кому \")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"class\"]), _createVNode(_component_v_btn, {\n      value: \"whom-who\",\n      onClick: _cache[1] || (_cache[1] = $event => _ctx.whoWhomlist = false),\n      class: _normalizeClass({\n        selected: !_ctx.whoWhomlist\n      })\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" Кому-кто \")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"class\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\"\\t</div>\"), _ctx.whoWhomlist ? (_openBlock(), _createBlock(_component_WhoWhomList, {\n    key: 0,\n    persons: _ctx.getPersons\n  }, null, 8 /* PROPS */, [\"persons\"])) : (_openBlock(), _createBlock(_component_WhomWhoList, {\n    key: 1,\n    persons: _ctx.getPersons,\n    whomWho: _ctx.whomWho\n  }, null, 8 /* PROPS */, [\"persons\", \"whomWho\"]))]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_app_button, {\n    class: \"next-btn\",\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.$router.push('/'))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Заново\")]),\n    _: 1 /* STABLE */\n  })])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createCommentVNode","_createVNode","_component_v_btn_toggle","_ctx","text","$event","rounded","color","size","group","_component_v_btn","value","onClick","_cache","whoWhomlist","_normalizeClass","selected","_createBlock","_component_WhoWhomList","persons","getPersons","_component_WhomWhoList","whomWho","_hoisted_5","_component_app_button","$router","push"],"sources":["/Users/anastasiia_maxim/Desktop/split_bill/src/pages/ResultPage.vue"],"sourcesContent":["<template>\n\t<div class=\"results\">\n\t\t<div class=\"results__body\">\n\t\t\t<div class=\"results__header header\">\n\t\t\t\t<h1>Результаты</h1>\n\t\t\t</div>\n\t\t\t<div class=\"results__content content\">\n\t\t\t\t<!--<div class=\"results__btns\">-->\n\t\t\t\t\t<!--<app-button\n\t\t\t\t\t\tclass=\"results_select-btn select-btn\"\n\t\t\t\t\t\t@click=\"whoWhomlist = true\"\n\t\t\t\t\t\t:class=\"{ selected: whoWhomlist }\"\n\t\t\t\t\t\t>Кто-кому</app-button\n\t\t\t\t\t>\n\t\t\t\t\t<app-button\n\t\t\t\t\t\tclass=\"results_select-btn select-btn\"\n\t\t\t\t\t\t@click=\"whoWhomlist = false\"\n\t\t\t\t\t\t:class=\"{ selected: !whoWhomlist }\"\n\t\t\t\t\t\t>Кому-кто</app-button\n\t\t\t\t\t>-->\n\n\t\t\t\t\t<v-btn-toggle\n\t          v-model=\"text\"\n\t          rounded=\"1.5\"\n\t\t\t\t\t\tcolor=\"deep-purple-accent-3\"\n\t\t\t\t\t\tsize\n\t          group\n\t        >\n\t          <v-btn \n\t\t\t\t\t\tvalue=\"who-whom\"\n\t\t\t\t\t\t@click=\"whoWhomlist = true\"\n\t\t\t\t\t\t:class=\"{ selected: whoWhomlist }\">\n\t            Кто-кому\n\t          </v-btn>\n\n\t          <v-btn \n\t\t\t\t\t\tvalue=\"whom-who\"\n\t\t\t\t\t\t@click=\"whoWhomlist = false\"\n\t\t\t\t\t\t:class=\"{ selected: !whoWhomlist }\">\n\t            Кому-кто\n\t          </v-btn>\n\t        </v-btn-toggle>\n\n\t\t\t<!--\t</div>-->\n\t\t\t\t<WhoWhomList v-if=\"whoWhomlist\" :persons=\"getPersons\" />\n\t\t\t\t<WhomWhoList v-else :persons=\"getPersons\" :whomWho=\"whomWho\" />\n\t\t\t</div>\n\t\t\t<div class=\"results__footer footer\">\n\t\t\t\t<app-button class=\"next-btn\" @click=\"$router.push('/')\"\n\t\t\t\t\t>Заново</app-button\n\t\t\t\t>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport WhoWhomList from '@/components/WhoWhomList.vue'\nimport WhomWhoList from '@/components/WhomWhoList.vue'\nimport { mapGetters } from 'vuex'\nexport default {\n\tdata: () => ({\n\t\twhomWho: [],\n\t\twhoWhomlist: true,\n\n\t\ttext: 'center',\n\t\ticon: 'justify',\n\t}),\n\tcomponents: {\n\t\tWhoWhomList,\n\t\tWhomWhoList,\n\t},\n\tcreated() {\n\t\tthis.getDebts()\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tgetProducts: 'product/getProducts',\n\t\t\tgetPersons: 'person/getPersons',\n\t\t}),\n\t},\n\tmethods: {\n\t\tgetDebts() {\n\t\t\tthis.getProducts.forEach(product => {\n\t\t\t\tconst chosenPeople = product.chosenPeople\n\t\t\t\tconst pricePerson = product.total / chosenPeople.length\n\t\t\t\tchosenPeople.forEach(chosenPerson => {\n\t\t\t\t\tconst person = this.getPersons.find(p => p.id === chosenPerson.id)\n\t\t\t\t\tconst payer = product.payer.id\n\t\t\t\t\tif (payer !== person.id)\n\t\t\t\t\t\tperson.debts.push({ id: payer, amount: pricePerson })\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.checkDebts()\n\t\t\tthis.getWhoWhom()\n\t\t},\n\t\tcheckDebts() {\n\t\t\tthis.getPersons.forEach(person => {\n\t\t\t\tperson.debts.forEach((debt, ind) => {\n\t\t\t\t\tconst debtPerson = this.getPersons.find(p => p.id === debt.id)\n\t\t\t\t\tconst index = debtPerson.debts.findIndex(d => d.id === person.id)\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tconst diff =\n\t\t\t\t\t\t\tperson.debts[ind].amount - debtPerson.debts[index].amount\n\t\t\t\t\t\tif (diff < 0) {\n\t\t\t\t\t\t\tperson.debts.splice(ind, 1)\n\t\t\t\t\t\t\tdebtPerson.debts[index].amount = -diff\n\t\t\t\t\t\t} else if (diff > 0) {\n\t\t\t\t\t\t\tdebtPerson.debts.splice(index, 1)\n\t\t\t\t\t\t\tperson.debts[ind].amount = diff\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tperson.debts.splice(ind, 1)\n\t\t\t\t\t\t\tdebtPerson.debts.splice(index, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tgetWhoWhom() {\n\t\t\tthis.getPersons.forEach(curPerson => {\n\t\t\t\tconst len = this.whomWho.push({ whom: curPerson.id, who: [] })\n\t\t\t\tthis.getPersons.forEach(person => {\n\t\t\t\t\tif (person.id !== curPerson.id) {\n\t\t\t\t\t\tconst index = person.debts.findIndex(d => d.id === curPerson.id)\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tthis.whomWho[len - 1].who.push({\n\t\t\t\t\t\t\t\tid: person.id,\n\t\t\t\t\t\t\t\tamount: person.debts[index].amount,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.whomWho.forEach(ww => {\n\t\t\t\tconsole.log(ww)\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAS;;EACdA,KAAK,EAAC;AAAe;gCACzBC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAwB,I,aAClCC,mBAAA,CAAmB,YAAf,YAAU,E;;EAEVD,KAAK,EAAC;AAA0B;;EAyChCA,KAAK,EAAC;AAAwB;;;;;;;uBA9CrCE,mBAAA,CAoDM,OApDNC,UAoDM,GAnDLF,mBAAA,CAkDM,OAlDNG,UAkDM,GAjDLC,UAEM,EACNJ,mBAAA,CAwCM,OAxCNK,UAwCM,GAvCLC,mBAAA,iCAAkC,EACjCA,mBAAA,4aAWI,EAEJC,YAAA,CAoBmBC,uBAAA;gBAnBJC,IAAA,CAAAC,IAAI;+DAAJD,IAAA,CAAAC,IAAI,GAAAC,MAAA;IACbC,OAAO,EAAC,KAAK;IAClBC,KAAK,EAAC,sBAAsB;IAC5BC,IAAI,EAAJ,EAAI;IACCC,KAAK,EAAL;;sBAEA,MAKQ,CALRR,YAAA,CAKQS,gBAAA;MAJbC,KAAK,EAAC,UAAU;MACfC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAEF,IAAA,CAAAW,WAAW;MAClBrB,KAAK,EAAAsB,eAAA;QAAAC,QAAA,EAAcb,IAAA,CAAAW;MAAW;;wBAAI,MAE9B,C,iBAF8B,YAE9B,E;;kCAEAb,YAAA,CAKQS,gBAAA;MAJbC,KAAK,EAAC,UAAU;MACfC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAEF,IAAA,CAAAW,WAAW;MAClBrB,KAAK,EAAAsB,eAAA;QAAAC,QAAA,GAAeb,IAAA,CAAAW;MAAW;;wBAAI,MAE/B,C,iBAF+B,YAE/B,E;;;;qCAGRd,mBAAA,YAAc,EACMG,IAAA,CAAAW,WAAW,I,cAA9BG,YAAA,CAAwDC,sBAAA;;IAAvBC,OAAO,EAAEhB,IAAA,CAAAiB;yDAC1CH,YAAA,CAA+DI,sBAAA;;IAA1CF,OAAO,EAAEhB,IAAA,CAAAiB,UAAU;IAAGE,OAAO,EAAEnB,IAAA,CAAAmB;sDAErD5B,mBAAA,CAIM,OAJN6B,UAIM,GAHLtB,YAAA,CAECuB,qBAAA;IAFW/B,KAAK,EAAC,UAAU;IAAEmB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAEF,IAAA,CAAAsB,OAAO,CAACC,IAAI;;sBAC/C,MAAM,C,iBAAN,QAAM,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}