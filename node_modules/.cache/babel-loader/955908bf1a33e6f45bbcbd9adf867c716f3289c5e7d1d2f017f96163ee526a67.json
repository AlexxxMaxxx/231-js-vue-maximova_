{"ast":null,"code":"import { useVuelidate } from '@vuelidate/core';\nimport { required, minLength, minValue } from '@vuelidate/validators';\nexport default {\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data() {\n    return {\n      name: '',\n      price: 0,\n      amount: 0,\n      payer: this.persons[0],\n      chosenPeople: this.persons,\n      allChosen: true,\n      indeterminate: false,\n      buttonContent: 'Добавить',\n      hasError: false\n    };\n  },\n  validations() {\n    return {\n      name: {\n        required,\n        minLength: minLength(3)\n      },\n      price: {\n        required,\n        minValue: minValue(1)\n      },\n      amount: {\n        required,\n        minValue: minValue(1)\n      }\n    };\n  },\n  watch: {\n    chosenPeople(newValue) {\n      if (newValue.length === 0) {\n        this.indeterminate = false;\n        this.allChosen = false;\n      } else if (newValue.length === this.persons.length) {\n        this.indeterminate = false;\n        this.allChosen = true;\n      } else {\n        this.indeterminate = true;\n        this.allChosen = false;\n      }\n    }\n  },\n  methods: {\n    toggleAll() {\n      console.log(this.allChosen);\n      this.chosenPeople = this.allChosen ? this.persons.slice() : [];\n    },\n    inputValidation() {\n      this.v$.$touch();\n      if (!this.v$.$error) {\n        this.hasError = false;\n        this.buttonContent = 'Добавить';\n        this.addProduct();\n      } else if (this.v$.$errors.length >= 3) {\n        this.hasError = true;\n        this.buttonContent = 'Заполните все поля!';\n      } else if (this.v$.name.$dirty) {\n        this.hasError = true;\n        if (this.v$.price.minValue.$invalid) {\n          this.buttonContent = 'Бесплатный сыр только в мышеловке! Укажите стоимость.';\n        } else if (this.v$.amount.minValue.$invalid) {\n          this.buttonContent = 'Количество не может быть нулевым!';\n        } else if (this.v$.name.minLength.$invalid) {\n          this.buttonContent = 'Слишком короткое название!';\n        } else {\n          this.buttonContent = 'Обязательное поле!';\n        }\n      }\n    },\n    addProduct() {\n      this.$emit('add', {\n        id: Date.now(),\n        name: this.name.charAt(0).toUpperCase() + this.name.toLowerCase().slice(1),\n        price: this.price,\n        amount: this.amount,\n        payer: this.payer,\n        chosenPeople: this.chosenPeople,\n        total: this.price * this.amount\n      });\n      this.name = '';\n      this.price = this.amount = 0;\n      this.payer = this.persons[0];\n      this.chosenPeople = [];\n    }\n  },\n  props: {\n    persons: {\n      type: Array,\n      required: true\n    }\n  }\n};","map":{"version":3,"names":["useVuelidate","required","minLength","minValue","setup","v$","data","name","price","amount","payer","persons","chosenPeople","allChosen","indeterminate","buttonContent","hasError","validations","watch","newValue","length","methods","toggleAll","console","log","slice","inputValidation","$touch","$error","addProduct","$errors","$dirty","$invalid","$emit","id","Date","now","charAt","toUpperCase","toLowerCase","total","props","type","Array"],"sources":["/Users/anastasiia_maxim/Desktop/split_bill/src/components/ProductForm.vue"],"sourcesContent":["<template>\n\t<form class=\"product-form\" @submit.prevent>\n\t\t<div class=\"product-form__fields\">\n\t\t\t<div class=\"product-form__list-input\">\n\t\t\t\t<app-input\n\t\t\t\t\tclass=\"product-form__input input\"\n\t\t\t\t\t:class=\"{ invalid: v$.name.$error }\"\n\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\tv-model.trim=\"name\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Название\"\n\t\t\t\t\t>Название\n\t\t\t\t</app-input>\n\t\t\t\t<app-input\n\t\t\t\t\tclass=\"product-form__input input\"\n\t\t\t\t\t:class=\"{ invalid: v$.price.$error }\"\n\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\tv-model=\"price\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t>Стоимость\n\t\t\t\t</app-input>\n\t\t\t\t<app-input\n\t\t\t\t\tclass=\"product-form__input input\"\n\t\t\t\t\t:class=\"{ invalid: v$.amount.$error }\"\n\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\tv-model=\"amount\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t>Количество\n\t\t\t\t</app-input>\n\t\t\t</div>\n\n\t\t\t<v-select\n\t  clearable\n\t  label=\"Select\"\n\t  :items=\"['California', 'Colorado', 'Florida', 'Georgia', 'Texas', 'Wyoming']\"\n\t  variant=\"outlined\"\n\t></v-select>\n\t\n\t\t\t<div class=\"product-form__select-form\">\n\t\t\t\t<div class=\"product-form__title\">Кто оплачивал?</div>\n\t\t\t\t<select class=\"product-form__select\" v-model=\"payer\">\n\t\t\t\t\t<option\n\t\t\t\t\t\tclass=\"product-form__option\"\n\t\t\t\t\t\tv-for=\"person in persons\"\n\t\t\t\t\t\t:value=\"person\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ person.name }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<form class=\"product-form__checkbox-form\">\n\t\t\t\t<div class=\"product-form__title\">Кто использовал?</div>\n\n\t\t\t\t<div class=\"product-form__content\">\n\t\t\t\t\t<label class=\"product-form__checkbox\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"check-box\"\n\t\t\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t@change=\"toggleAll\"\n\t\t\t\t\t\t\t:indeterminate=\"indeterminate\"\n\t\t\t\t\t\t\tv-model=\"allChosen\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span class=\"check-style\"></span>\n\t\t\t\t\t\t{{ allChosen ? 'Снять выбор' : 'Выбрать всех' }}\n\n\t\t\t\t\t\t<label class=\"product-form__checkbox\" v-for=\"person in persons\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"check-box\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t:value=\"person\"\n\t\t\t\t\t\t\t\tv-model=\"chosenPeople\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span class=\"check-style\"></span>\n\t\t\t\t\t\t\t{{ person.name }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t\t<app-button\n\t\t\tclass=\"product-form__add-btn add-btn\"\n\t\t\t:class=\"{ disabled: hasError }\"\n\t\t\t@click=\"inputValidation\"\n\t\t\t>{{ buttonContent }}</app-button\n\t\t>\n\t</form>\n</template>\n\n<script>\nimport { useVuelidate } from '@vuelidate/core'\nimport { required, minLength, minValue } from '@vuelidate/validators'\n\nexport default {\n\tsetup() {\n\t\treturn { v$: useVuelidate() }\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tname: '',\n\t\t\tprice: 0,\n\t\t\tamount: 0,\n\t\t\tpayer: this.persons[0],\n\t\t\tchosenPeople: this.persons,\n\n\t\t\tallChosen: true,\n\t\t\tindeterminate: false,\n\n\t\t\tbuttonContent: 'Добавить',\n\t\t\thasError: false,\n\t\t}\n\t},\n\tvalidations() {\n\t\treturn {\n\t\t\tname: {\n\t\t\t\trequired,\n\t\t\t\tminLength: minLength(3),\n\t\t\t},\n\t\t\tprice: {\n\t\t\t\trequired,\n\t\t\t\tminValue: minValue(1),\n\t\t\t},\n\t\t\tamount: {\n\t\t\t\trequired,\n\t\t\t\tminValue: minValue(1),\n\t\t\t},\n\t\t}\n\t},\n\twatch: {\n\t\tchosenPeople(newValue) {\n\t\t\tif (newValue.length === 0) {\n\t\t\t\tthis.indeterminate = false\n\t\t\t\tthis.allChosen = false\n\t\t\t} else if (newValue.length === this.persons.length) {\n\t\t\t\tthis.indeterminate = false\n\t\t\t\tthis.allChosen = true\n\t\t\t} else {\n\t\t\t\tthis.indeterminate = true\n\t\t\t\tthis.allChosen = false\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggleAll() {\n\t\t\tconsole.log(this.allChosen)\n\t\t\tthis.chosenPeople = this.allChosen ? this.persons.slice() : []\n\t\t},\n\t\tinputValidation() {\n\t\t\tthis.v$.$touch()\n\n\t\t\tif (!this.v$.$error) {\n\t\t\t\tthis.hasError = false\n\t\t\t\tthis.buttonContent = 'Добавить'\n\t\t\t\tthis.addProduct()\n\t\t\t} else if (this.v$.$errors.length >= 3) {\n\t\t\t\tthis.hasError = true\n\t\t\t\tthis.buttonContent = 'Заполните все поля!'\n\t\t\t} else if (this.v$.name.$dirty) {\n\t\t\t\tthis.hasError = true\n\t\t\t\tif (this.v$.price.minValue.$invalid) {\n\t\t\t\t\tthis.buttonContent =\n\t\t\t\t\t\t'Бесплатный сыр только в мышеловке! Укажите стоимость.'\n\t\t\t\t} else if (this.v$.amount.minValue.$invalid) {\n\t\t\t\t\tthis.buttonContent = 'Количество не может быть нулевым!'\n\t\t\t\t} else if (this.v$.name.minLength.$invalid) {\n\t\t\t\t\tthis.buttonContent = 'Слишком короткое название!'\n\t\t\t\t} else {\n\t\t\t\t\tthis.buttonContent = 'Обязательное поле!'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddProduct() {\n\t\t\tthis.$emit('add', {\n\t\t\t\tid: Date.now(),\n\t\t\t\tname:\n\t\t\t\t\tthis.name.charAt(0).toUpperCase() + this.name.toLowerCase().slice(1),\n\t\t\t\tprice: this.price,\n\t\t\t\tamount: this.amount,\n\t\t\t\tpayer: this.payer,\n\t\t\t\tchosenPeople: this.chosenPeople,\n\t\t\t\ttotal: this.price * this.amount,\n\t\t\t})\n\t\t\tthis.name = ''\n\t\t\tthis.price = this.amount = 0\n\t\t\tthis.payer = this.persons[0]\n\t\t\tthis.chosenPeople = []\n\t\t},\n\t},\n\tprops: {\n\t\tpersons: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}