{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport WhoWhomList from '@/components/WhoWhomList.vue';\nimport WhomWhoList from '@/components/WhomWhoList.vue';\nimport { mapGetters } from 'vuex';\nexport default {\n  data: () => ({\n    whomWho: [],\n    whoWhomlist: true,\n    text: 'center',\n    icon: 'justify'\n  }),\n  components: {\n    WhoWhomList,\n    WhomWhoList\n  },\n  created() {\n    this.getDebts();\n  },\n  computed: {\n    ...mapGetters({\n      getProducts: 'product/getProducts',\n      getPersons: 'person/getPersons'\n    })\n  },\n  methods: {\n    getDebts() {\n      this.getProducts.forEach(product => {\n        const chosenPeople = product.chosenPeople;\n        const pricePerson = product.total / chosenPeople.length;\n        chosenPeople.forEach(chosenPerson => {\n          const person = this.getPersons.find(p => p.id === chosenPerson.id);\n          const payer = product.payer.id;\n          if (payer !== person.id) person.debts.push({\n            id: payer,\n            amount: pricePerson\n          });\n        });\n      });\n      this.checkDebts();\n      this.getWhoWhom();\n    },\n    checkDebts() {\n      this.getPersons.forEach(person => {\n        person.debts.forEach((debt, ind) => {\n          const debtPerson = this.getPersons.find(p => p.id === debt.id);\n          const index = debtPerson.debts.findIndex(d => d.id === person.id);\n          if (index !== -1) {\n            const diff = person.debts[ind].amount - debtPerson.debts[index].amount;\n            if (diff < 0) {\n              person.debts.splice(ind, 1);\n              debtPerson.debts[index].amount = -diff;\n            } else if (diff > 0) {\n              debtPerson.debts.splice(index, 1);\n              person.debts[ind].amount = diff;\n            } else {\n              person.debts.splice(ind, 1);\n              debtPerson.debts.splice(index, 1);\n            }\n          }\n        });\n      });\n    },\n    getWhoWhom() {\n      this.getPersons.forEach(curPerson => {\n        const len = this.whomWho.push({\n          whom: curPerson.id,\n          who: []\n        });\n        this.getPersons.forEach(person => {\n          if (person.id !== curPerson.id) {\n            const index = person.debts.findIndex(d => d.id === curPerson.id);\n            if (index !== -1) {\n              this.whomWho[len - 1].who.push({\n                id: person.id,\n                amount: person.debts[index].amount\n              });\n            }\n          }\n        });\n      });\n      this.whomWho.forEach(ww => {\n        console.log(ww);\n      });\n    }\n  }\n};","map":{"version":3,"names":["WhoWhomList","WhomWhoList","mapGetters","data","whomWho","whoWhomlist","text","icon","components","created","getDebts","computed","getProducts","getPersons","methods","forEach","product","chosenPeople","pricePerson","total","length","chosenPerson","person","find","p","id","payer","debts","push","amount","checkDebts","getWhoWhom","debt","ind","debtPerson","index","findIndex","d","diff","splice","curPerson","len","whom","who","ww","console","log"],"sources":["/Users/anastasiia_maxim/Desktop/split_bill/src/pages/ResultPage.vue"],"sourcesContent":["<template>\n\t<div class=\"results\">\n\t\t<div class=\"results__body\">\n\t\t\t<div class=\"results__header header\">\n\t\t\t\t<h1>Результаты</h1>\n\t\t\t</div>\n\t\t\t<div class=\"results__content content\">\n\t\t\t\t<!--<div class=\"results__btns\">-->\n\t\t\t\t\t<!--<app-button\n\t\t\t\t\t\tclass=\"results_select-btn select-btn\"\n\t\t\t\t\t\t@click=\"whoWhomlist = true\"\n\t\t\t\t\t\t:class=\"{ selected: whoWhomlist }\"\n\t\t\t\t\t\t>Кто-кому</app-button\n\t\t\t\t\t>\n\t\t\t\t\t<app-button\n\t\t\t\t\t\tclass=\"results_select-btn select-btn\"\n\t\t\t\t\t\t@click=\"whoWhomlist = false\"\n\t\t\t\t\t\t:class=\"{ selected: !whoWhomlist }\"\n\t\t\t\t\t\t>Кому-кто</app-button\n\t\t\t\t\t>-->\n\n\t\t\t\t\t<v-btn-toggle\n\t          v-model=\"text\"\n\t          rounded=\"1.5\"\n\t\t\t\t\t\tcolor=\"deep-purple-accent-3\"\n\t\t\t\t\t\tsize=\"small\"\n\t          group\n\t        >\n\t          <v-btn \n\t\t\t\t\t\tvalue=\"who-whom\"\n\t\t\t\t\t\t@click=\"whoWhomlist = true\"\n\t\t\t\t\t\t:class=\"{ selected: whoWhomlist }\">\n\t            Кто-кому\n\t          </v-btn>\n\n\t          <v-btn \n\t\t\t\t\t\tvalue=\"whom-who\"\n\t\t\t\t\t\t@click=\"whoWhomlist = false\"\n\t\t\t\t\t\t:class=\"{ selected: !whoWhomlist }\">\n\t            Кому-кто\n\t          </v-btn>\n\t        </v-btn-toggle>\n\n\t\t\t<!--\t</div>-->\n\t\t\t\t<WhoWhomList v-if=\"whoWhomlist\" :persons=\"getPersons\" />\n\t\t\t\t<WhomWhoList v-else :persons=\"getPersons\" :whomWho=\"whomWho\" />\n\t\t\t</div>\n\t\t\t<div class=\"results__footer footer\">\n\t\t\t\t<app-button class=\"next-btn\" @click=\"$router.push('/')\"\n\t\t\t\t\t>Заново</app-button\n\t\t\t\t>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport WhoWhomList from '@/components/WhoWhomList.vue'\nimport WhomWhoList from '@/components/WhomWhoList.vue'\nimport { mapGetters } from 'vuex'\nexport default {\n\tdata: () => ({\n\t\twhomWho: [],\n\t\twhoWhomlist: true,\n\n\t\ttext: 'center',\n\t\ticon: 'justify',\n\t}),\n\tcomponents: {\n\t\tWhoWhomList,\n\t\tWhomWhoList,\n\t},\n\tcreated() {\n\t\tthis.getDebts()\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tgetProducts: 'product/getProducts',\n\t\t\tgetPersons: 'person/getPersons',\n\t\t}),\n\t},\n\tmethods: {\n\t\tgetDebts() {\n\t\t\tthis.getProducts.forEach(product => {\n\t\t\t\tconst chosenPeople = product.chosenPeople\n\t\t\t\tconst pricePerson = product.total / chosenPeople.length\n\t\t\t\tchosenPeople.forEach(chosenPerson => {\n\t\t\t\t\tconst person = this.getPersons.find(p => p.id === chosenPerson.id)\n\t\t\t\t\tconst payer = product.payer.id\n\t\t\t\t\tif (payer !== person.id)\n\t\t\t\t\t\tperson.debts.push({ id: payer, amount: pricePerson })\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.checkDebts()\n\t\t\tthis.getWhoWhom()\n\t\t},\n\t\tcheckDebts() {\n\t\t\tthis.getPersons.forEach(person => {\n\t\t\t\tperson.debts.forEach((debt, ind) => {\n\t\t\t\t\tconst debtPerson = this.getPersons.find(p => p.id === debt.id)\n\t\t\t\t\tconst index = debtPerson.debts.findIndex(d => d.id === person.id)\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tconst diff =\n\t\t\t\t\t\t\tperson.debts[ind].amount - debtPerson.debts[index].amount\n\t\t\t\t\t\tif (diff < 0) {\n\t\t\t\t\t\t\tperson.debts.splice(ind, 1)\n\t\t\t\t\t\t\tdebtPerson.debts[index].amount = -diff\n\t\t\t\t\t\t} else if (diff > 0) {\n\t\t\t\t\t\t\tdebtPerson.debts.splice(index, 1)\n\t\t\t\t\t\t\tperson.debts[ind].amount = diff\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tperson.debts.splice(ind, 1)\n\t\t\t\t\t\t\tdebtPerson.debts.splice(index, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tgetWhoWhom() {\n\t\t\tthis.getPersons.forEach(curPerson => {\n\t\t\t\tconst len = this.whomWho.push({ whom: curPerson.id, who: [] })\n\t\t\t\tthis.getPersons.forEach(person => {\n\t\t\t\t\tif (person.id !== curPerson.id) {\n\t\t\t\t\t\tconst index = person.debts.findIndex(d => d.id === curPerson.id)\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\tthis.whomWho[len - 1].who.push({\n\t\t\t\t\t\t\t\tid: person.id,\n\t\t\t\t\t\t\t\tamount: person.debts[index].amount,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.whomWho.forEach(ww => {\n\t\t\t\tconsole.log(ww)\n\t\t\t})\n\t\t},\n\t},\n}\n</script>\n\n<style>\nv-btn-toggle {\n\t height: 10px;\n\t width: 10px;\n\t border-radius: 15px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}