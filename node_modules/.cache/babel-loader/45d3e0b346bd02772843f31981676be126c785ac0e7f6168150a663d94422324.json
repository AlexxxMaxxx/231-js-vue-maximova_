{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"product-form__fields\"\n};\nconst _hoisted_2 = {\n  class: \"product-form__list-input\"\n};\nconst _hoisted_3 = {\n  class: \"product-form__select-form\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"product-form__title\"\n}, \"Кто оплачивал?\", -1 /* HOISTED */);\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = {\n  class: \"product-form__checkbox-form\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"product-form__title\"\n}, \"Кто использовал?\", -1 /* HOISTED */);\nconst _hoisted_8 = {\n  class: \"product-form__content\"\n};\nconst _hoisted_9 = {\n  class: \"product-form__checkbox\"\n};\nconst _hoisted_10 = [\"indeterminate\"];\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"check-style\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_12 = {\n  class: \"product-form__checkbox\"\n};\nconst _hoisted_13 = [\"value\"];\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"check-style\"\n}, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_app_input = _resolveComponent(\"app-input\");\n  const _component_v_select = _resolveComponent(\"v-select\");\n  const _component_app_button = _resolveComponent(\"app-button\");\n  return _openBlock(), _createElementBlock(\"form\", {\n    class: \"product-form\",\n    onSubmit: _cache[7] || (_cache[7] = _withModifiers(() => {}, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_app_input, {\n    class: _normalizeClass([\"product-form__input input\", {\n      invalid: $setup.v$.name.$error\n    }]),\n    isLabel: true,\n    modelValue: $data.name,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event),\n    modelModifiers: {\n      trim: true\n    },\n    type: \"text\",\n    placeholder: \"Название\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Название \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\", \"modelValue\"]), _createVNode(_component_app_input, {\n    class: _normalizeClass([\"product-form__input input\", {\n      invalid: $setup.v$.price.$error\n    }]),\n    isLabel: true,\n    modelValue: $data.price,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.price = $event),\n    type: \"number\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Стоимость \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\", \"modelValue\"]), _createVNode(_component_app_input, {\n    class: _normalizeClass([\"product-form__input input\", {\n      invalid: $setup.v$.amount.$error\n    }]),\n    isLabel: true,\n    modelValue: $data.amount,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.amount = $event),\n    type: \"number\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Количество \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\", \"modelValue\"])]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.persons, person => {\n    return _openBlock(), _createBlock(_component_v_select, {\n      clearable: \"\",\n      label: \"Select\",\n      variant: \"outlined\"\n    });\n  }), 256 /* UNKEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"select\", {\n    class: \"product-form__select\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.payer = $event)\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.persons, person => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      class: \"product-form__option\",\n      value: person\n    }, _toDisplayString(person.name), 9 /* TEXT, PROPS */, _hoisted_5);\n  }), 256 /* UNKEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.payer]])]), _createElementVNode(\"form\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"label\", _hoisted_9, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"check-box\",\n    isLabel: true,\n    type: \"checkbox\",\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.toggleAll && $options.toggleAll(...args)),\n    indeterminate: $data.indeterminate,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.allChosen = $event)\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_10), [[_vModelCheckbox, $data.allChosen]]), _hoisted_11, _createTextVNode(\" \" + _toDisplayString($data.allChosen ? 'Снять выбор' : 'Выбрать всех') + \" \", 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.persons, person => {\n    return _openBlock(), _createElementBlock(\"label\", _hoisted_12, [_withDirectives(_createElementVNode(\"input\", {\n      class: \"check-box\",\n      type: \"checkbox\",\n      value: person,\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.chosenPeople = $event)\n    }, null, 8 /* PROPS */, _hoisted_13), [[_vModelCheckbox, $data.chosenPeople]]), _hoisted_14, _createTextVNode(\" \" + _toDisplayString(person.name), 1 /* TEXT */)]);\n  }), 256 /* UNKEYED_FRAGMENT */))])])])]), _createVNode(_component_app_button, {\n    class: _normalizeClass([\"product-form__add-btn add-btn\", {\n      disabled: $data.hasError\n    }]),\n    onClick: $options.inputValidation\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($data.buttonContent), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\", \"onClick\"])], 32 /* NEED_HYDRATION */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","onSubmit","_cache","_withModifiers","_hoisted_1","_hoisted_2","_createVNode","_component_app_input","_normalizeClass","invalid","$setup","v$","name","$error","isLabel","$data","$event","trim","type","placeholder","price","amount","_Fragment","_renderList","$props","persons","person","_createBlock","_component_v_select","clearable","label","variant","_hoisted_3","_hoisted_4","payer","value","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","onChange","args","$options","toggleAll","indeterminate","allChosen","_hoisted_11","_toDisplayString","_hoisted_12","chosenPeople","_hoisted_14","_component_app_button","disabled","hasError","onClick","inputValidation","buttonContent"],"sources":["/Users/anastasiia_maxim/Desktop/split_bill/src/components/ProductForm.vue"],"sourcesContent":["<template>\n\t<form class=\"product-form\" @submit.prevent>\n\t\t<div class=\"product-form__fields\">\n\t\t\t<div class=\"product-form__list-input\">\n\t\t\t\t<app-input\n\t\t\t\t\tclass=\"product-form__input input\"\n\t\t\t\t\t:class=\"{ invalid: v$.name.$error }\"\n\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\tv-model.trim=\"name\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Название\"\n\t\t\t\t\t>Название\n\t\t\t\t</app-input>\n\t\t\t\t<app-input\n\t\t\t\t\tclass=\"product-form__input input\"\n\t\t\t\t\t:class=\"{ invalid: v$.price.$error }\"\n\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\tv-model=\"price\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t>Стоимость\n\t\t\t\t</app-input>\n\t\t\t\t<app-input\n\t\t\t\t\tclass=\"product-form__input input\"\n\t\t\t\t\t:class=\"{ invalid: v$.amount.$error }\"\n\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\tv-model=\"amount\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t>Количество\n\t\t\t\t</app-input>\n\t\t\t</div>\n\n\t\t\t<v-select v-for=\"person in persons\"\n\t  clearable\n\t  label=\"Select\"\n\t  variant=\"outlined\"\n\t></v-select>\n\t\n\t\t\t<div class=\"product-form__select-form\">\n\t\t\t\t<div class=\"product-form__title\">Кто оплачивал?</div>\n\t\t\t\t<select class=\"product-form__select\" v-model=\"payer\">\n\t\t\t\t\t<option\n\t\t\t\t\t\tclass=\"product-form__option\"\n\t\t\t\t\t\tv-for=\"person in persons\"\n\t\t\t\t\t\t:value=\"person\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ person.name }}\n\t\t\t\t\t</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t<form class=\"product-form__checkbox-form\">\n\t\t\t\t<div class=\"product-form__title\">Кто использовал?</div>\n\n\t\t\t\t<div class=\"product-form__content\">\n\t\t\t\t\t<label class=\"product-form__checkbox\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"check-box\"\n\t\t\t\t\t\t\t:isLabel=\"true\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t@change=\"toggleAll\"\n\t\t\t\t\t\t\t:indeterminate=\"indeterminate\"\n\t\t\t\t\t\t\tv-model=\"allChosen\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span class=\"check-style\"></span>\n\t\t\t\t\t\t{{ allChosen ? 'Снять выбор' : 'Выбрать всех' }}\n\n\t\t\t\t\t\t<label class=\"product-form__checkbox\" v-for=\"person in persons\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclass=\"check-box\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t:value=\"person\"\n\t\t\t\t\t\t\t\tv-model=\"chosenPeople\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span class=\"check-style\"></span>\n\t\t\t\t\t\t\t{{ person.name }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t\t<app-button\n\t\t\tclass=\"product-form__add-btn add-btn\"\n\t\t\t:class=\"{ disabled: hasError }\"\n\t\t\t@click=\"inputValidation\"\n\t\t\t>{{ buttonContent }}</app-button\n\t\t>\n\t</form>\n</template>\n\n<script>\nimport { useVuelidate } from '@vuelidate/core'\nimport { required, minLength, minValue } from '@vuelidate/validators'\n\nexport default {\n\tsetup() {\n\t\treturn { v$: useVuelidate() }\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tname: '',\n\t\t\tprice: 0,\n\t\t\tamount: 0,\n\t\t\tpayer: this.persons[0],\n\t\t\tchosenPeople: this.persons,\n\n\t\t\tallChosen: true,\n\t\t\tindeterminate: false,\n\n\t\t\tbuttonContent: 'Добавить',\n\t\t\thasError: false,\n\t\t}\n\t},\n\tvalidations() {\n\t\treturn {\n\t\t\tname: {\n\t\t\t\trequired,\n\t\t\t\tminLength: minLength(3),\n\t\t\t},\n\t\t\tprice: {\n\t\t\t\trequired,\n\t\t\t\tminValue: minValue(1),\n\t\t\t},\n\t\t\tamount: {\n\t\t\t\trequired,\n\t\t\t\tminValue: minValue(1),\n\t\t\t},\n\t\t}\n\t},\n\twatch: {\n\t\tchosenPeople(newValue) {\n\t\t\tif (newValue.length === 0) {\n\t\t\t\tthis.indeterminate = false\n\t\t\t\tthis.allChosen = false\n\t\t\t} else if (newValue.length === this.persons.length) {\n\t\t\t\tthis.indeterminate = false\n\t\t\t\tthis.allChosen = true\n\t\t\t} else {\n\t\t\t\tthis.indeterminate = true\n\t\t\t\tthis.allChosen = false\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\ttoggleAll() {\n\t\t\tconsole.log(this.allChosen)\n\t\t\tthis.chosenPeople = this.allChosen ? this.persons.slice() : []\n\t\t},\n\t\tinputValidation() {\n\t\t\tthis.v$.$touch()\n\n\t\t\tif (!this.v$.$error) {\n\t\t\t\tthis.hasError = false\n\t\t\t\tthis.buttonContent = 'Добавить'\n\t\t\t\tthis.addProduct()\n\t\t\t} else if (this.v$.$errors.length >= 3) {\n\t\t\t\tthis.hasError = true\n\t\t\t\tthis.buttonContent = 'Заполните все поля!'\n\t\t\t} else if (this.v$.name.$dirty) {\n\t\t\t\tthis.hasError = true\n\t\t\t\tif (this.v$.price.minValue.$invalid) {\n\t\t\t\t\tthis.buttonContent =\n\t\t\t\t\t\t'Бесплатный сыр только в мышеловке! Укажите стоимость.'\n\t\t\t\t} else if (this.v$.amount.minValue.$invalid) {\n\t\t\t\t\tthis.buttonContent = 'Количество не может быть нулевым!'\n\t\t\t\t} else if (this.v$.name.minLength.$invalid) {\n\t\t\t\t\tthis.buttonContent = 'Слишком короткое название!'\n\t\t\t\t} else {\n\t\t\t\t\tthis.buttonContent = 'Обязательное поле!'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taddProduct() {\n\t\t\tthis.$emit('add', {\n\t\t\t\tid: Date.now(),\n\t\t\t\tname:\n\t\t\t\t\tthis.name.charAt(0).toUpperCase() + this.name.toLowerCase().slice(1),\n\t\t\t\tprice: this.price,\n\t\t\t\tamount: this.amount,\n\t\t\t\tpayer: this.payer,\n\t\t\t\tchosenPeople: this.chosenPeople,\n\t\t\t\ttotal: this.price * this.amount,\n\t\t\t})\n\t\t\tthis.name = ''\n\t\t\tthis.price = this.amount = 0\n\t\t\tthis.payer = this.persons[0]\n\t\t\tthis.chosenPeople = []\n\t\t},\n\t},\n\tprops: {\n\t\tpersons: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}